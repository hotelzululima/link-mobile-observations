---
- name: Upload
  hosts: localhost
  tasks:
    - name: Log into Docker Hub
      docker_login:
        username: '{{ docker_user }}'
        password: '{{ docker_password }}'
        email: '{{ docker_email }}'
    - name: Upload image
      docker_image:
        name: "intersection"
        repository: "intersection/link-mobile-observations:<TAG>"
        tag: "<TAG>"
        state: present
        push: yes
    - name: Log out of Docker Hub
      docker_login:
        state: absent
